"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),n=require("react/jsx-runtime"),s=require("react"),t=require("../Avatar/Avatar.js"),i=require("../Icon/Icon.js"),a=require("../Icon/type.js"),o=require("../Plugins/index.js"),r=require("../../hooks/useConversation.js"),c=require("../../context/TUIKitContext.js");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function u(l){var u=l.conversation,d=l.Avatar,v=void 0===d?t.Avatar:d,x=l.displayImage,m=l.displayTitle,j=l.displayMessage,p=l.displayTime,C=l.unread,_=l.active,h=l.setActiveConversation,g=s.useRef(null),I=_?"conversation-preview-content--active":"",N=C&&C>=1?"conversation-preview-content--unread":"",f=u.isPinned?"conversation-preview-content--pin":"",q=s.useState(!1),P=q[0],y=q[1],w=c.useTUIKitContext("ConversationPreviewContent"),b=w.tim,M=w.conversation,T=r.useConversation(b),A=T.pinConversation,U=T.deleteConversation,k=function(e){var n=u.conversationID,s=u.isPinned;switch(e){case"pin":A({conversationID:n,isPinned:!s});break;case"delete":U(n),u===M&&h(null)}};return n.jsxs("button",e.__assign({type:"button","aria-selected":_,role:"option",className:"conversation-preview-container ".concat(I," ").concat(N," ").concat(f),onClick:function(){h&&h(u),(null==g?void 0:g.current)&&g.current.blur()},onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1)},ref:g},{children:[n.jsx("div",e.__assign({className:"avatar"},{children:n.jsx(v,{image:x,name:m,size:40})})),n.jsxs("div",e.__assign({className:"content"},{children:[n.jsx("div",e.__assign({className:"title"},{children:m})),n.jsx("div",e.__assign({className:"message"},{children:j})),n.jsx("div",{children:C?n.jsx("div",e.__assign({className:"unread"},{children:C<=99?C:"99+"})):n.jsx("div",{className:"unread"})})]})),n.jsxs("div",e.__assign({className:"external"},{children:[C?n.jsx("div",e.__assign({className:"unread"},{children:C<=99?C:"99+"})):n.jsx("div",{className:"unread"}),P?n.jsx("div",e.__assign({className:"".concat(P?"more--hover":"more")},{children:n.jsx(o.Plugins,{customClass:"more-handle-box",plugins:[n.jsx("div",e.__assign({role:"presentation",className:"more-handle-item",onClick:function(e){e.stopPropagation(),k("pin")}},{children:u.isPinned?"Cancel Pin":"Pin"})),n.jsx("div",e.__assign({className:"more-handle-item",style:{color:"#FF584C"},onClick:function(e){e.stopPropagation(),k("delete")},role:"presentation"},{children:"Delete"}))],showNumber:0,MoreIcon:n.jsx(i.Icon,{className:"icon-more",width:16,height:16,type:a.IconTypes.MORE})})})):n.jsx("div",e.__assign({className:"time"},{children:p}))]}))]}))}require("../../context/TUIChatStateContext.js"),require("../../context/TUIChatActionContext.js"),require("../../context/TUIMessageContext.js"),require("../../context/ComponentContext.js"),require("../../context/TUIMessageInputContext.js");var d=l(s).default.memo(u);exports.ConversationPreviewContent=d,exports.unMemoConversationPreviewContent=u;
