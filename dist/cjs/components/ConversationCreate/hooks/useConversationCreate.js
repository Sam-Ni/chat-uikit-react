"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),r=require("react"),t=require("tim-js-sdk"),n=require("../static/word.js");require("react/jsx-runtime"),require("../../../context/TUIMessageContext.js"),require("../../Icon/config.js"),require("../../Icon/type.js"),require("date-fns"),require("../ConversationCreate.js"),require("../ConversationGroupTypeInfo.js"),require("../../TUIProfile/TUIProfileDefault.js"),require("../../../constants.js"),require("../../TUIMessage/hooks/useMessageReply.js"),require("../../TUIMessage/MessagePlugins.js"),require("../../TUIMessage/MessageContext.js"),require("../../TUIMessageInput/hooks/useHandleQuoteMessage.js"),require("../../Switch/Switch.js");var s=require("../../../hooks/useProfile.js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=i(t);exports.useConversationCreate=function(t,i,o){var a=r.useState({}),c=a[0],f=a[1],l=function(e){var r=e.trim(),t=r.charCodeAt(0);return t>40869||t<19968?r.charAt(0):n.strChineseFirstPy.charAt(t-19968)},d=function(){return e.__awaiter(void 0,void 0,void 0,(function(){var r,n,s,a,c;return e.__generator(this,(function(e){switch(e.label){case 0:return r=i.filter((function(e){return e.type===u.default.TYPES.CONV_C2C})).slice(0,5).map((function(e){return e.userProfile})),[4,t.getFriendList()];case 1:return n=e.sent(),s=n.code,a=n.data,0===s&&(c=v(a.map((function(e){return e.profile})),r),f(c),o&&o(c,f)),[2]}}))}))},v=function(e,r){void 0===r&&(r=[]);for(var t={"Frequently Contacted":r,"#":[]},n=65;n<=90;n+=1)t[String.fromCharCode(n)]=[];return e.forEach((function(e){var r=e.nick,n=e.userID,s=l(r||n);s>="a"&&s<="z"?t[s.toLocaleUpperCase()].push(e):s<"A"||s>"z"?t["#"].push(e):t[s].push(e)})),Object.keys(t).forEach((function(e){t[e].sort((function(e,r){var t=e.nick,n=e.userID,s=r.nick,i=r.userID;return t||n<s||i||t||n===s||i?1:-1}))})),t},h=s.useProfile(t).getUserProfile;return r.useEffect((function(){d()}),[t]),{getFirstLetter:l,queryFriendList:d,getFriendListSortSearchResult:function(r){return e.__awaiter(void 0,void 0,void 0,(function(){var t,n,s,i;return e.__generator(this,(function(e){switch(e.label){case 0:return r?[4,h([r])]:[2,c];case 1:return t=e.sent().data,n={},s=!1,Object.keys(c).forEach((function(e){n[e]=c[e].filter((function(e){var t=e.nick,n=e.userID,i=t.toLocaleLowerCase(),u=r.toLocaleLowerCase(),o=i?i.includes(u):n.includes(u);return s=s||o,o}))})),"TencentCloudDemo"===(null===(i=process.env)||void 0===i?void 0:i.REACT_APP_ONLINE)?[2,n]:[2,s?n:v(t)]}}))}))},friendListSortResult:c}};
