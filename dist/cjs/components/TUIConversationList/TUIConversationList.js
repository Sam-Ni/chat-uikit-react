"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),n=require("react"),o=require("../../context/TUIKitContext.js");require("../../context/TUIChatStateContext.js"),require("../../context/TUIChatActionContext.js"),require("../../context/TUIMessageContext.js"),require("../../context/ComponentContext.js"),require("../../context/TUIMessageInputContext.js");var s=require("./hooks/useConversationList.js"),r=require("../ConversationPreview/ConversationPreview.js");require("../ConversationPreview/ConversationPreviewContent.js");var i=require("../ConversationPreview/ConversationListContainer.js"),a=require("../Icon/Icon.js"),v=require("../Icon/type.js");require("date-fns"),require("tim-js-sdk");var u=require("./hooks/useConversationUpdate.js"),c=require("../../context/TUIConversationContext.js");function C(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function x(C){var x=C.Preview,l=C.Container,j=void 0===l?i.ConversationListContainer:l,d=C.onConversationListUpdated,I=C.filterConversation,q=o.useTUIKitContext("TUIConversationList"),U=q.tim,f=q.customClasses,T=q.conversation,m=q.setActiveConversation;q.setTUIProfileShow;var p=c.useTUIConversationContext("TUIConversationList").filterConversation,h=I||p,_=n.useState(0),g=_[0],L=_[1],P=s(U,(function(e,t){e.length&&m(T)}),h),w=P.conversationList,y=P.setConversationList;u.useConversationUpdate(y,d,(function(){return L((function(e){return e+1}))}),h);var S=n.useState("");S[0],S[1];var N=n.useState(w);N[0],N[1];var M=n.useState(!1);M[0],M[1],o.useTUIKitContext().myProfile;var b=n.useRef(null);return t.jsx("div",e.__assign({className:"tui-conversation ".concat(f||""),ref:b},{children:t.jsx(j,e.__assign({setConversationList:y},{children:0===w.length?t.jsxs("div",e.__assign({className:"no-result"},{children:[t.jsx(a.Icon,{className:"no-result-icon",type:v.IconTypes.EFFORT,width:42,height:42}),t.jsx("div",e.__assign({className:"no-result-message"},{children:"No conversation"}))]})):w.map((function(n){var o={activeConversation:T,conversation:n,setActiveConversation:m,Preview:x,conversationUpdateCount:g};return t.jsx(r.ConversationPreview,e.__assign({},o),n.conversationID)}))}))}))}var l=C(n).default.memo(x);exports.TUIConversationList=l,exports.UnMemoTUIConversationList=x;
