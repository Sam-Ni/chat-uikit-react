"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react/jsx-runtime"),n=require("react"),s=require("../../constants.js"),r=require("../../context/TUIChatStateContext.js");require("../../context/TUIMessageContext.js");var a=require("../../context/TUIMessageInputContext.js"),u=require("../TUIMessage/utils/emojiMap.js");exports.TUIMessageInputDefault=function(){var o=a.useTUIMessageInputContext("TUIMessageInputDefault"),i=o.text,c=o.disabled,l=o.handleChange,d=o.handleKeyDown,x=o.handlePasete,f=o.textareaRef,v=o.focus,p=o.setText,E=o.setCursorPos,g=r.useTUIChatStateContext("TUIMessageInputDefault").operateData;n.useEffect((function(){g[s.MESSAGE_OPERATE.REVOKE]&&p(u.formatEmojiString(g[s.MESSAGE_OPERATE.REVOKE].payload.text,1))}),[g]),n.useEffect((function(){var e,t;return v&&f.current&&(f.current.autofocus=!0,null===(e=null==f?void 0:f.current)||void 0===e||e.focus(),null===(t=null==f?void 0:f.current)||void 0===t||t.addEventListener("paste",x)),function(){var e;null===(e=null==f?void 0:f.current)||void 0===e||e.removeEventListener("paste",x)}}),[v]);var I=n.useState(!1),j=I[0],T=I[1];return t.jsxs("div",e.__assign({className:"input-box ".concat(c?"disabled":""," ").concat(j?"tui-kit-input-box--focus":"tui-kit-input-box--blur")},{children:[t.jsx("div",e.__assign({className:"input-visibility-content"},{children:i})),!c&&t.jsx("textarea",{placeholder:"send a message",rows:1,value:i,ref:f,onChange:l,onKeyDown:d,onFocus:function(e){T(!0)},onBlur:function(e){E({start:e.target.selectionStart,end:e.target.selectionEnd}),T(!1)}})]}))};
