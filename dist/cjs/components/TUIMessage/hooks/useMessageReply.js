"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("tim-js-sdk"),s=require("../../../context/TUIKitContext.js"),a=require("../../../context/TUIChatStateContext.js");require("tslib"),require("react/jsx-runtime"),require("../../../context/TUIMessageContext.js");var u=require("../../untils.js");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l,n=r(t),i=((l={})[n.default.TYPES.MSG_TEXT]=1,l[n.default.TYPES.MSG_FACE]=8,l[n.default.TYPES.MSG_IMAGE]=3,l[n.default.TYPES.MSG_AUDIO]=4,l[n.default.TYPES.MSG_VIDEO]=5,l[n.default.TYPES.MSG_FILE]=6,l[n.default.TYPES.MSG_CUSTOM]=2,l);exports.useMessageReply=function(t){var r=t.message,l=e.useState(null),o=l[0],d=l[1],S=e.useState(""),f=S[0],T=S[1],g=e.useState(null),c=g[0],m=g[1],v=e.useState(""),M=v[0],E=v[1],I=s.useTUIKitContext("TUIChat").tim,p=a.useTUIChatStateContext("useMessageReply").messageList;e.useLayoutEffect((function(){x(r)}),[r]);var x=function(e){if(null==e?void 0:e.cloudCustomData){var t=u.JSONStringToParse(null==r?void 0:r.cloudCustomData),s=(null==t?void 0:t.messageReply)||"";if(s){d(s),T(null==s?void 0:s.messageSender),E(null==s?void 0:s.messageID);var a=p.filter((function(e){var t=e.ID===(null==s?void 0:s.messageID),a=t&&i[e.type]===s.messageType,u=e.type!==n.default.TYPES.MSG_TEXT||e.payload.text===s.messageAbstract;return t&&a&&u}));m(a[0]||I.findMessage(null==s?void 0:s.messageID))}}};return{messageReply:o,sender:f,replyMessage:c,messageID:M,message:r}};
