"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),s=require("react/jsx-runtime"),t=require("react"),r=require("tim-js-sdk"),n=require("../../constants.js"),o=require("../../context/TUIChatStateContext.js"),u=require("../../context/TUIMessageContext.js");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=a(t),l=a(r);function d(r){var a=r.message,i=r.children,d=r.Progress,g=r.isShow,c=void 0!==g&&g,S=t.useState(),x=S[0],f=S[1],v=t.useState(0),p=v[0],M=v[1],j=o.useTUIChatStateContext("MessageProgressWithContext").uploadPenddingMessageList,P=u.useTUIMessageContext("MessageProgressWithContext"),h=P.isShowProgress,E=void 0!==h&&h,_=P.Progress,m=d||_,I=c||E;return t.useEffect((function(){j&&j.length>0&&j.map((function(e){return(null==e?void 0:e.ID)===(null==a?void 0:a.ID)&&(f(e),M(null==e?void 0:e.progress)),e}))}),[j]),I?m?s.jsx(m,{message:x}):!((null==a?void 0:a.type)!==l.default.TYPES.MSG_IMAGE&&(null==a?void 0:a.type)!==l.default.TYPES.MSG_VIDEO&&(null==a?void 0:a.type)!==l.default.TYPES.MSG_FILE||(null==a?void 0:a.status)!==n.MESSAGE_STATUS.UNSEND)&&s.jsxs("div",e.__assign({className:"progress-box"},{children:[s.jsx("span",{className:"progress",style:{width:"".concat(100*p,"%")}}),i]})):null}var g=i.default.memo(d);exports.MessageProgress=function(t){return s.jsx(g,e.__assign({},t))};
