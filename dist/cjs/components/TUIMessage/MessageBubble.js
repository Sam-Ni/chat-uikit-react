"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),s=require("react/jsx-runtime"),n=require("react"),t=require("tim-js-sdk"),a=require("../../constants.js"),i=require("../../context/TUIChatActionContext.js");require("../../context/TUIMessageContext.js");var l=require("../Icon/Icon.js"),r=require("../Icon/type.js"),u=require("./hooks/useMessageReply.js"),o=require("./MessageProgress.js");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=c(n),g=c(t);function m(t){var c=t.message,d=t.children,m=t.Context,x=t.Plugins,b=n.useState(!1),j=b[0],_=b[1],S=u.useMessageReply({message:c}),v=S.messageReply,p=S.replyMessage,M=S.sender,f=i.useTUIChatActionContext().setHighlightedMessageId;return s.jsxs("div",e.__assign({className:"meesage-bubble"},{children:[s.jsxs("div",e.__assign({className:"meesage-bubble-context ".concat(null==c?void 0:c.flow),onMouseEnter:function(){_(!0)},onMouseLeave:function(){_(!1)}},{children:[s.jsxs("div",e.__assign({className:"message-context\n            ".concat(v?"meesage-bubble-reply meesage-bubble-reply-".concat(null==c?void 0:c.flow):"","\n            ").concat((null==c?void 0:c.type)!==g.default.TYPES.MSG_IMAGE&&(null==c?void 0:c.type)!==g.default.TYPES.MSG_VIDEO&&(null==c?void 0:c.type)!==g.default.TYPES.MSG_FILE||(null==c?void 0:c.status)!==a.MESSAGE_STATUS.UNSEND?"":"loading")},{children:[v&&s.jsxs("div",e.__assign({className:"meesage-bubble-reply-main",role:"menuitem",tabIndex:0,onClick:function(){f(null==p?void 0:p.ID)}},{children:[s.jsx("header",e.__assign({className:"title"},{children:M})),m&&s.jsx(m,{message:p})]})),d,s.jsx(o.MessageProgress,{message:c})]})),x&&s.jsx("div",e.__assign({className:"message-plugin"},{children:j&&s.jsx(x,{})}))]})),s.jsxs("div",e.__assign({className:"message-bubble-status icon"},{children:[(null==c?void 0:c.status)===a.MESSAGE_STATUS.FAIL&&s.jsx("i",{className:"icon-fail"}),(null==c?void 0:c.status)===a.MESSAGE_STATUS.UNSEND&&s.jsx(l.Icon,{width:10,height:10,type:r.IconTypes.PROGRESS})]}))]}))}var x=d.default.memo(m);exports.MessageBubble=function(n){return s.jsx(x,e.__assign({},n))};
