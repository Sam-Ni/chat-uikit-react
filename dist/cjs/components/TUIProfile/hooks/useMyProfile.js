"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react"),r=require("tim-js-sdk"),n=require("../../../context/TUIKitContext.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("react/jsx-runtime"),require("../../../context/TUIMessageContext.js");var i=u(r);exports.useMyProfile=function(){var r=this,u=t.useState(null),a=u[0],o=u[1],s=n.useTUIKitContext("useMyProfile"),l=s.tim,c=s.myProfile,f=t.useCallback((function(){return e.__awaiter(r,void 0,void 0,(function(){var t;return e.__generator(this,(function(e){switch(e.label){case 0:return c?(o(c),[3,3]):[3,1];case 1:return[4,null==l?void 0:l.getMyProfile()];case 2:t=e.sent(),o(null==t?void 0:t.data),e.label=3;case 3:return[2]}}))}))}),[l]),d=t.useCallback((function(t){return e.__awaiter(r,void 0,void 0,(function(){var r,n;return e.__generator(this,(function(u){switch(u.label){case 0:return[4,null==l?void 0:l.updateMyProfile(t)];case 1:return r=u.sent(),n=e.__assign({},a),Object.keys(r.data).map((function(e){return n[e]=r.data[e],e})),o(n),[2,r]}}))}))}),[l]),_=function(e){console.log("onProfileUpdated",e.data)};return t.useEffect((function(){return e.__awaiter(r,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,f()];case 1:return e.sent(),[2]}}))})),null==l||l.on(i.default.EVENT.PROFILE_UPDATED,_),function(){null==l||l.off(i.default.EVENT.PROFILE_UPDATED,_)}}),[l]),{myProfile:a,updateMyProfile:d}};
