"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),a=require("react/jsx-runtime"),t=require("react"),i=require("react-date-picker"),n=require("tim-js-sdk"),l=require("../../context/TUIKitContext.js");require("../../context/TUIMessageContext.js");var r=require("../Avatar/Avatar.js"),s=require("../DivWithEdit/DivWithEdit.js"),u=require("../Icon/Icon.js"),o=require("../Icon/type.js"),c=require("../untils.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var v,m=d(t),f=d(i),h=d(n),p=((v={})[h.default.TYPES.GENDER_UNKNOWN]="unknow",v[h.default.TYPES.GENDER_MALE]="male",v[h.default.TYPES.GENDER_FEMALE]="female",v),g=["https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_1.png","https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_2.png","https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_3.png","https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_4.png","https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_5.png","https://im.sdk.qcloud.com/download/tuikit-resource/avatar/avatar_6.png"],_=[{label:"Male",value:h.default.TYPES.GENDER_MALE},{label:"Female",value:h.default.TYPES.GENDER_FEMALE}];function j(i){var n,d,v=i.userInfo,m=i.className,h=i.update,j=l.useTUIKitContext("TUIProfileDefault").setTUIProfileShow,x=t.useState(""),E=x[0],N=x[1],k=[{name:"Signature",value:null==v?void 0:v.selfSignature,type:"text",children:null},{name:"Gender",value:null===(n=p[null==v?void 0:v.gender])||void 0===n?void 0:n.replace(p[null==v?void 0:v.gender][0],null===(d=p[null==v?void 0:v.gender][0])||void 0===d?void 0:d.toLocaleUpperCase()),type:"select",children:a.jsx("ul",e.__assign({className:"select-list"},{children:null==_?void 0:_.map((function(t,i){var n="".concat(t.value).concat(i);return a.jsx("li",e.__assign({className:"select-list-item",role:"menuitem",tabIndex:i,onClick:function(){q(t)}},{children:t.label}),n)}))}))},{name:"Birthday",value:null==v?void 0:v.birthday,type:"select",children:a.jsx(f.default,{className:"tui-profile-birthday",calendarClassName:"tui-profile-birthday-calendar",isOpen:!0,format:"y-MM-dd",onChange:function(e){I(e)},value:function(e){if(8===(null==e?void 0:e.length)){var a=Number(e.slice(0,4)),t=Number(e.slice(4,6)),i=Number(e.slice(-2));return new Date(a,t-1,i)}return new Date}("".concat(null==v?void 0:v.birthday))})}],D=function(e){N(e)},y=function(e){h(e),N("")},b=function(e){var a,t="";switch(null==e?void 0:e.name){case"nick":t="nick";break;case"Signature":t="selfSignature";break;default:return void N("")}var i=((a={})[t]=e.value,a);y(i)},q=function(e){y({gender:e.value})},I=function(e){var a,t,i,n;y({birthday:Number((a=e,t=a.getDate()>9?a.getDate():"0".concat(a.getDate()),i=a.getMonth()>8?a.getMonth()+1:"0".concat(a.getMonth()+1),n=a.getFullYear(),"".concat(n).concat(i).concat(t)))})};return a.jsxs("div",e.__assign({className:"".concat(m," tui-profile")},{children:[a.jsxs("header",e.__assign({className:"tui-profile-header"},{children:[a.jsx(u.Icon,{width:9,height:16,type:o.IconTypes.BACK,onClick:function(){j(!1)}}),a.jsx("h1",{children:"Personal information"})]})),a.jsxs("main",e.__assign({className:"tui-profile-main"},{children:[a.jsx("div",e.__assign({className:"tui-profile-avatar"},{children:a.jsx(r.Avatar,{image:c.handleDisplayAvatar(null==v?void 0:v.avatar),size:94,update:function(e){y({avatar:e})},list:g})})),a.jsx(s.DivWithEdit,{name:"nick",className:"tui-profile-nick",value:null==v?void 0:v.nick,type:"text",toggle:D,isEdit:"nick"===E,confirm:b,close:function(){N("")}}),a.jsxs("div",e.__assign({className:"tui-profile-ID"},{children:[a.jsx("h5",{children:"ID:"}),a.jsx("span",{children:null==v?void 0:v.userID})]}))]})),a.jsx("ul",e.__assign({className:"tui-profile-list"},{children:k.map((function(t){var i="".concat(t.name);return a.jsxs("li",e.__assign({className:"tui-profile-list-item"},{children:[a.jsx("h4",{children:t.name}),a.jsx(s.DivWithEdit,e.__assign({className:"tui-profile-div-with-edit",classEditName:"tui-profile-edit",name:t.name,value:null==t?void 0:t.value,type:t.type,toggle:D,isEdit:E===t.name,confirm:b,close:function(){N("")}},{children:null==t?void 0:t.children}))]}),i)}))}))]}))}var x=m.default.memo(j);exports.TUIProfileDefault=function(t){var i=e.__assign({},t);return a.jsx(x,e.__assign({},i))};
