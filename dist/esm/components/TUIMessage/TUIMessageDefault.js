import{__assign as e}from"tslib";import{jsx as s,jsxs as o}from"react/jsx-runtime";import t from"react";import a from"tim-js-sdk";import{MessageBubble as m}from"./MessageBubble.js";import{MessageTip as i}from"./MessageTip.js";import{useTUIMessageContext as n,messageShowType as r}from"../../context/TUIMessageContext.js";import{useComponentContext as l}from"../../context/ComponentContext.js";import{MessageSystem as d}from"./MessageSystem.js";import{MessageRevoke as u}from"./MessageRevoke.js";import{MessageName as g}from"./MessageName.js";import{MessageAvatar as v}from"./MessageAvatar.js";function p(t){var p=t.message,c=t.MessageContext,f=t.MessagePlugins,M=t.className,P=l(),S=P.MessageContext,T=P.MessagePlugins,N=n("TUIMessage"),_=N.prefix,x=N.suffix,I=N.customName,j=N.showAvatar,C=void 0===j?r.IN:j,G=N.showName,R=void 0===G?r.IN:G,h=N.customAvatar,y=c||S,E=f||T;return o("div",e({className:"message-default\n      ".concat((null==p?void 0:p.type)===a.TYPES.MSG_GRP_TIP||(null==p?void 0:p.isRevoked)?"tip":null==p?void 0:p.flow,"\n      ").concat(M,"\n      ")},{children:[(null==p?void 0:p.type)===a.TYPES.MSG_GRP_TIP&&s(i,{message:p}),(null==p?void 0:p.type)===a.TYPES.MSG_GRP_SYS_NOTICE&&s(d,{message:p}),(null==p?void 0:p.isRevoked)&&s(u,{message:p}),(null==p?void 0:p.type)!==a.TYPES.MSG_GRP_TIP&&(null==p?void 0:p.type)!==a.TYPES.MSG_GRP_SYS_NOTICE&&!(null==p?void 0:p.isRevoked)&&o("div",e({className:"".concat(null==p?void 0:p.flow),"data-message-id":null==p?void 0:p.ID},{children:[_,s(v,{message:p,CustomAvatar:h,showType:C}),o("main",e({className:"content"},{children:[s(g,{message:p,CustomName:I,showType:R}),s(m,e({message:p,Context:y,Plugins:E},{children:s(y,{message:p})}))]})),x]}),null==p?void 0:p.ID)]}))}var c=t.memo(p);function f(o){return o.message,s(c,e({},o))}export{f as TUIMessageDefault};
