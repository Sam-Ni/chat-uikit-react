import{__assign as e}from"tslib";import{jsx as s,jsxs as t}from"react/jsx-runtime";import o,{useState as n}from"react";import i from"tim-js-sdk";import{MESSAGE_STATUS as l}from"../../constants.js";import{useTUIChatActionContext as a}from"../../context/TUIChatActionContext.js";import"../../context/TUIMessageContext.js";import{Icon as m}from"../Icon/Icon.js";import{IconTypes as r}from"../Icon/type.js";import{useMessageReply as c}from"./hooks/useMessageReply.js";import{MessageProgress as u}from"./MessageProgress.js";function d(o){var d=o.message,g=o.children,p=o.Context,b=o.Plugins,f=n(!1),v=f[0],h=f[1],I=c({message:d}),N=I.messageReply,y=I.replyMessage,M=I.sender,x=a().setHighlightedMessageId;return t("div",e({className:"meesage-bubble"},{children:[t("div",e({className:"meesage-bubble-context ".concat(null==d?void 0:d.flow),onMouseEnter:function(){h(!0)},onMouseLeave:function(){h(!1)}},{children:[t("div",e({className:"message-context\n            ".concat(N?"meesage-bubble-reply meesage-bubble-reply-".concat(null==d?void 0:d.flow):"","\n            ").concat((null==d?void 0:d.type)!==i.TYPES.MSG_IMAGE&&(null==d?void 0:d.type)!==i.TYPES.MSG_VIDEO&&(null==d?void 0:d.type)!==i.TYPES.MSG_FILE||(null==d?void 0:d.status)!==l.UNSEND?"":"loading")},{children:[N&&t("div",e({className:"meesage-bubble-reply-main",role:"menuitem",tabIndex:0,onClick:function(){x(null==y?void 0:y.ID)}},{children:[s("header",e({className:"title"},{children:M})),p&&s(p,{message:y})]})),g,s(u,{message:d})]})),b&&s("div",e({className:"message-plugin"},{children:v&&s(b,{})}))]})),t("div",e({className:"message-bubble-status icon"},{children:[(null==d?void 0:d.status)===l.FAIL&&s("i",{className:"icon-fail"}),(null==d?void 0:d.status)===l.UNSEND&&s(m,{width:10,height:10,type:r.PROGRESS})]}))]}))}var g=o.memo(d);function p(t){return s(g,e({},t))}export{p as MessageBubble};
