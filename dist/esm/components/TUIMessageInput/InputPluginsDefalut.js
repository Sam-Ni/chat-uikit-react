import{__assign as i,__spreadArray as o}from"tslib";import{jsxs as e,jsx as n}from"react/jsx-runtime";import{useRef as l}from"react";import{EmojiPicker as t}from"./EmojiPicker.js";import{Plugins as r}from"../Plugins/index.js";import{useUploadElement as u}from"./hooks/useUploadElement.js";import{MESSAGE_TYPE_NAME as s}from"../../constants.js";import{useTUIMessageInputContext as c}from"../../context/TUIMessageInputContext.js";import{Icon as d}from"../Icon/Icon.js";import{IconTypes as p}from"../Icon/type.js";import{useTUIChatStateContext as m}from"../../context/TUIChatStateContext.js";import"../../context/TUIMessageContext.js";function g(){var g,a,f,v,h,I,C,M=c("TUIMessageInputDefault"),j=M.sendUploadMessage,k=M.pluginConfig,E=m("TUIMessageInput").TUIMessageInputConfig,P=(null==k?void 0:k.plugins)||(null===(g=null==E?void 0:E.pluginConfig)||void 0===g?void 0:g.plugins)||[],x=(null==k?void 0:k.showNumber)||(null===(a=null==E?void 0:E.pluginConfig)||void 0===a?void 0:a.showNumber)||1,y=(null==k?void 0:k.MoreIcon)||(null===(f=null==E?void 0:E.pluginConfig)||void 0===f?void 0:f.MoreIcon),U=function(i,o,e){return"boolean"==typeof i?i:"boolean"==typeof o?o:e},N=U(null==k?void 0:k.isEmojiPicker,null===(v=null==E?void 0:E.pluginConfig)||void 0===v?void 0:v.isEmojiPicker,!0),T=U(null==k?void 0:k.isImagePicker,null===(h=null==E?void 0:E.pluginConfig)||void 0===h?void 0:h.isImagePicker,!0),b=U(null==k?void 0:k.isVideoPicker,null===(I=null==E?void 0:E.pluginConfig)||void 0===I?void 0:I.isVideoPicker,!0),w=U(null==k?void 0:k.isFilePicker,null===(C=null==E?void 0:E.pluginConfig)||void 0===C?void 0:C.isFilePicker,!0),D=l(null),V=T&&u({children:e("div",i({className:"input-plugin-item"},{children:[n(d,{width:20,height:20,type:p.IMAGE}),n("span",{children:"Image"})]})),type:"image",accept:"image/*",onChange:function(i){D.current.closeMore(),j({file:i},s.IMAGE)}}),F=b&&u({children:e("div",i({className:"input-plugin-item"},{children:[n(d,{width:20,height:20,type:p.VIDEO}),n("span",{children:"Video"})]})),type:"video",accept:"video/*",onChange:function(i){D.current.closeMore(),j({file:i},s.VIDEO)}}),O=w&&u({children:e("div",i({className:"input-plugin-item"},{children:[n(d,{width:20,height:20,type:p.DOCUMENT}),n("span",{children:"Document"})]})),type:"file",accept:"file/*",onChange:function(i){D.current.closeMore(),j({file:i},s.FILE)}}),A=o([N&&n(t,{}),V,F,O],P,!0).filter((function(i){return i}));return n(r,{ref:D,plugins:A,showNumber:x,MoreIcon:y})}export{g as InputPluginsDefalut};
