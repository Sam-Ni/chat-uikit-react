import{__assign as t}from"tslib";import{jsxs as e,jsx as n}from"react/jsx-runtime";import{useEffect as o,useState as r}from"react";import{MESSAGE_OPERATE as a}from"../../constants.js";import{useTUIChatStateContext as s}from"../../context/TUIChatStateContext.js";import"../../context/TUIMessageContext.js";import{useTUIMessageInputContext as i}from"../../context/TUIMessageInputContext.js";import{formatEmojiString as u}from"../TUIMessage/utils/emojiMap.js";function c(){var c=i("TUIMessageInputDefault"),l=c.text,d=c.disabled,p=c.handleChange,f=c.handleKeyDown,m=c.handlePasete,v=c.textareaRef,x=c.focus,g=c.setText,h=c.setCursorPos,I=s("TUIMessageInputDefault").operateData;o((function(){I[a.REVOKE]&&g(u(I[a.REVOKE].payload.text,1))}),[I]),o((function(){var t,e;return x&&v.current&&(v.current.autofocus=!0,null===(t=null==v?void 0:v.current)||void 0===t||t.focus(),null===(e=null==v?void 0:v.current)||void 0===e||e.addEventListener("paste",m)),function(){var t;null===(t=null==v?void 0:v.current)||void 0===t||t.removeEventListener("paste",m)}}),[x]);var b=r(!1),j=b[0],C=b[1];return e("div",t({className:"input-box ".concat(d?"disabled":""," ").concat(j?"tui-kit-input-box--focus":"tui-kit-input-box--blur")},{children:[n("div",t({className:"input-visibility-content"},{children:l})),!d&&n("textarea",{placeholder:"send a message",rows:1,value:l,ref:v,onChange:p,onKeyDown:f,onFocus:function(t){C(!0)},onBlur:function(t){h({start:t.target.selectionStart,end:t.target.selectionEnd}),C(!1)}})]}))}export{c as TUIMessageInputDefault};
