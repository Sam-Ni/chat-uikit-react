import{__assign as t}from"tslib";import{jsxs as o,jsx as e}from"react/jsx-runtime";import{useState as r,useCallback as s,useEffect as i}from"react";import n from"tim-js-sdk";import"../../context/TUIKitContext.js";import"../../context/TUIChatStateContext.js";import{useTUIChatActionContext as a}from"../../context/TUIChatActionContext.js";import"../../context/TUIMessageContext.js";import"../../context/ComponentContext.js";import"../../context/TUIMessageInputContext.js";import{Model as m}from"../Model/index.js";import{Icon as l}from"../Icon/Icon.js";import{IconTypes as c}from"../Icon/type.js";import{getDisplayTitle as d}from"../ConversationPreview/utils.js";import{MESSAGE_OPERATE as p}from"../../constants.js";import"./hooks/useHandleQuoteMessage.js";import{useHandleForwardMessage as f}from"./hooks/useHandleForwardMessage.js";import{TUIMessageList as u}from"../TUIMessageList/TUIMessageList.js";function h(h){var g=h.handleForward,j=r([]),x=j[0],C=j[1],v=r([]);v[0];var w=v[1],I=r("");I[0];var M=I[1],T=a().operateMessage,U=f(),L=U.message,N=U.sendForwardMessage,b=U.conversationList,k=void 0===b?[]:b;console.log("TUIForward",L),L.type===n.TYPES.MSG_MERGER&&console.log("TUIMessageList",L.payload.messageList);var F=s((function(t){var o;T(((o={})[p.FORWARD]=null,o))}),[T]);k.slice(0,2),k.slice(2);var y;return i((function(){C([]),w([]),M("")}),[L]),L&&k.length>0&&o(m,t({onClick:F},{children:[o("div",t({role:"button",tabIndex:0,className:"tui-forward",onClick:function(t){t.stopPropagation()}},{children:[o("header",t({className:"tui-forward-header"},{children:[e(l,{type:c.CANCEL,width:16,height:16,onClick:F}),e("h2",t({className:"tui-forward-title"},{children:"Forward To"}))]})),e("main",t({className:"tui-forward-main"},{children:e(u,{messageList:L.payload.messageList})})),o("footer",t({className:"tui-forward-footer"},{children:[e("div",t({className:"tui-forward-footer-name"},{children:x.length>0&&(y=x,(null==y?void 0:y.map((function(t){return d(t)}))).toString())})),e("button",t({type:"button",className:"button",onClick:function(){var t;t=x,g?g({list:x,message:L}):N(x),F(t)},disabled:0===x.length},{children:"Forward"}))]}))]})),e("div",{children:"Test"})]}))}export{h as TUIForward};
